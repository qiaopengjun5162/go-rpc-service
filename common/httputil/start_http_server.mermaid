flowchart TD
    A[开始] --> B{监听地址}
    B -->|成功| C[初始化HTTP服务器]
    B -->|失败| F[返回错误]
    C --> D[应用自定义选项]
    D --> E{选项应用成功?}
    E -->|是| G[启动服务器]
    E -->|否| F[返回错误]
    G --> H[等待服务器结束]
    H --> I{服务器关闭}
    I -->|正常关闭| J[设置关闭标志]
    I -->|未知错误| K[抛出异常]
